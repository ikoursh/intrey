(this.webpackJsonp=this.webpackJsonp||[]).push([[5],{900:function(e,t){var n="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",r=0,a=[];e.exports=function(){var e=(new Date).getTime(),t=e===r;r=e;for(var i=new Array(8),o=7;o>=0;o--)i[o]=n.charAt(e%64),e=Math.floor(e/64);if(0!==e)throw new Error("We should have converted the entire timestamp.");var c=i.join("");if(t){for(o=11;o>=0&&63===a[o];o--)a[o]=0;a[o]++}else for(o=0;o<12;o++)a[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=n.charAt(a[o]);if(20!=c.length)throw new Error("Length should be 20.");return c}},901:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(5),a=n.n(r),i=n(8),o=n.n(i),c=n(9),u=n.n(c),l=n(7),s=n.n(l),f=n(902);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s()(e);if(t){var a=s()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var p=function(e){o()(n,e);var t=m(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,r)).code=e,i}return n}(n.n(f)()(Error))},902:function(e,t,n){var r=n(7),a=n(195),i=n(903),o=n(904);function c(t){var n="function"===typeof Map?new Map:void 0;return e.exports=c=function(e){if(null===e||!i(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},c(t)}e.exports=c},903:function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},904:function(e,t,n){var r=n(195),a=n(905);function i(t,n,o){return a()?e.exports=i=Reflect.construct:e.exports=i=function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&r(i,n.prototype),i},i.apply(null,arguments)}e.exports=i},905:function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},907:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return q}));var r,a=n(22),i=n.n(a),o=n(40),c=n.n(o),u=n(1),l=n.n(u),s=n(0),f=n.n(s),m=n(26),p=n(915),d=n(46),y=n(128),g=n(32),h=n(12),v=n(845),b=(n(901),n(914));!function(e){e.GRANTED="granted",e.UNDETERMINED="undetermined",e.DENIED="denied"}(r||(r={}));var x=n(19),w=n.n(x),E="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),P=new Uint8Array(16);function S(){if(!E)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return E(P)}for(var C=[],O=0;O<256;++O)C[O]=(O+256).toString(16).substr(1);var A=function(e,t){var n=t||0,r=C;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")};var I,j,D,R,L=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||S)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var i=0;i<16;++i)t[r+i]=a[i];return t||A(a)};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.All="All",e.Videos="Videos",e.Images="Images"}(I||(I={})),function(e){e[e.Passthrough=0]="Passthrough",e[e.LowQuality=1]="LowQuality",e[e.MediumQuality=2]="MediumQuality",e[e.HighestQuality=3]="HighestQuality",e[e.H264_640x480=4]="H264_640x480",e[e.H264_960x540=5]="H264_960x540",e[e.H264_1280x720=6]="H264_1280x720",e[e.H264_1920x1080=7]="H264_1920x1080",e[e.H264_3840x2160=8]="H264_3840x2160",e[e.HEVC_1920x1080=9]="HEVC_1920x1080",e[e.HEVC_3840x2160=10]="HEVC_3840x2160"}(j||(j={})),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low",e[e.VGA640x480=3]="VGA640x480",e[e.IFrame1280x720=4]="IFrame1280x720",e[e.IFrame960x540=5]="IFrame960x540"}(D||(D={}));var T=(R={},w()(R,I.All,"video/mp4,video/quicktime,video/x-m4v,video/*,image/*"),w()(R,I.Images,"image/*"),w()(R,I.Videos,"video/mp4,video/quicktime,video/x-m4v,video/*"),R),M={get name(){return"ExponentImagePicker"},launchImageLibraryAsync:function(e){var t,n,r,a;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.mediaTypes,n=void 0===t?I.Images:t,r=e.allowsMultipleSelection,a=void 0!==r&&r,o.next=3,i.a.awrap(_({mediaTypes:n,allowsMultipleSelection:a}));case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}}),null,null,null,Promise)},launchCameraAsync:function(e){var t,n,r,a;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.mediaTypes,n=void 0===t?I.Images:t,r=e.allowsMultipleSelection,a=void 0!==r&&r,o.next=3,i.a.awrap(_({mediaTypes:n,allowsMultipleSelection:a,capture:!0}));case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}}),null,null,null,Promise)},getCameraPermissionsAsync:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V());case 1:case"end":return e.stop()}}),null,null,null,Promise)},requestCameraPermissionsAsync:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V());case 1:case"end":return e.stop()}}),null,null,null,Promise)},getMediaLibraryPermissionsAsync:function(e){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V());case 1:case"end":return e.stop()}}),null,null,null,Promise)},requestMediaLibraryPermissionsAsync:function(e){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V());case 1:case"end":return e.stop()}}),null,null,null,Promise)}};function V(){return{status:r.GRANTED,expires:"never",granted:!0,canAskAgain:!0}}function _(e){var t=e.mediaTypes,n=e.capture,r=void 0!==n&&n,a=e.allowsMultipleSelection,o=void 0!==a&&a,c=T[t],u=document.createElement("input");return u.style.display="none",u.setAttribute("type","file"),u.setAttribute("accept",c),u.setAttribute("id",L()),o&&u.setAttribute("multiple","multiple"),r&&u.setAttribute("capture","camera"),document.body.appendChild(u),new Promise((function(e,t){u.addEventListener("change",(function(){var t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!u.files){r.next=14;break}if(o){r.next=8;break}return r.next=4,i.a.awrap(F(u.files[0]));case 4:t=r.sent,e(H({cancelled:!1},t)),r.next=12;break;case 8:return r.next=10,i.a.awrap(Promise.all(Array.from(u.files).map(F)));case 10:n=r.sent,e({cancelled:!1,selected:n});case 12:r.next=15;break;case 14:e({cancelled:!0});case 15:document.body.removeChild(u);case 16:case"end":return r.stop()}}),null,null,null,Promise)}));var n=new MouseEvent("click");u.dispatchEvent(n)}))}function F(e){return new Promise((function(t,n){var r=new FileReader;r.onerror=function(){n(new Error("Failed to read the selected media because the operation failed."))},r.onload=function(e){var n=e.target,r=n.result,a=function(){return t({uri:r,width:0,height:0})};if("string"===typeof(null==n?void 0:n.result)){var i=new Image;i.src=n.result,i.onload=function(){var e,n;return t({uri:r,width:null!=(e=i.naturalWidth)?e:i.width,height:null!=(n=i.naturalHeight)?n:i.height})},i.onerror=function(){return a()}}else a()},r.readAsDataURL(e)}))}function N(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(M.launchImageLibraryAsync){t.next=2;break}throw new b.a("ImagePicker","launchImageLibraryAsync");case 2:return t.next=4,i.a.awrap(M.launchImageLibraryAsync(null!=e?e:{}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),null,null,null,Promise)}var B,z=n(108),U=n(120),Q=n.n(U);function q(){B=Object(m.useStyleSheet)(m.StyleService.create({newChat:{position:"absolute",right:"3%",bottom:"3%"},myChats:{flex:1},myChatsLoading:{flex:1,justifyContent:"center",alignItems:"center"},item:{marginVertical:8},itemHeader:{minHeight:220,padding:24},itemHeaderDetails:{justifyContent:"space-between",flexDirection:"row",alignItems:"center"},itemStyxContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderRadius:4,marginHorizontal:-8},itemStyxText:{marginHorizontal:16,marginVertical:14},itemStyxButton:{paddingHorizontal:0,paddingVertical:0,borderRadius:24},itemDescription:{marginHorizontal:-8,marginTop:16},itemFooter:{flexDirection:"row",justifyContent:"space-between"},itemReactionsContainer:{flexDirection:"row"},itemAddButton:{flexDirection:"row-reverse",paddingHorizontal:0},iconButton:{paddingHorizontal:0}}));var e={header:function(e){var t=e.navigation;return f.a.createElement(f.a.Fragment,null,f.a.createElement(m.TopNavigation,{title:"Explore",alignment:"center",accessoryLeft:function(){return f.a.createElement(m.TopNavigationAction,{onPress:t.goBack,icon:function(e){return f.a.createElement(m.Icon,l()({},e,{name:"arrow-back"}))}})}}),f.a.createElement(m.Divider,null))}},t={header:function(){return f.a.createElement(m.TopNavigation,{alignment:"center",title:"Explore"})}},n=Object(p.a)();return f.a.createElement(y.a,{behavior:"ios"===g.a.OS?"padding":"height",style:{height:"100%"}},f.a.createElement(n.Navigator,null,f.a.createElement(n.Screen,{name:"Categories",component:Y,options:t}),f.a.createElement(n.Screen,{name:"Category",component:G,options:e}),f.a.createElement(n.Screen,{name:"New Post",component:K,options:e})))}function G(e){var t=e.route,n=e.navigation,r=Object(s.useState)(5),a=c()(r,2),o=a[0],u=a[1],p=Object(s.useState)(5),y=c()(p,2),g=y[0],h=y[1];Q.a.getItem("maxBias").then((function(e){return u(e?parseInt(e):5)})),Q.a.getItem("minBias").then((function(e){return h(e?parseInt(e):5)}));var b=t.params.c,x=Object(s.useState)(null),w=c()(x,2),E=w[0],P=w[1];return Object(s.useEffect)((function(){!function(){var e,t,n,r;i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!=E){a.next=28;break}return a.next=3,i.a.awrap(v.firestore.collection("Users").doc(null==(n=v.auth.currentUser)?void 0:n.uid).get());case 3:if(a.t0=t=a.sent.data(),null!=a.t0){a.next=8;break}a.t1=void 0,a.next=9;break;case 8:a.t1=t.bias;case 9:if(a.t2=e=a.t1,null==a.t2){a.next=14;break}a.t3=e,a.next=15;break;case 14:a.t3=0;case 15:return r=a.t3,console.log("getting posts in range "+(r-g)+"<x<"+(r+o)),a.t4=P,a.t5=i.a,a.t6=Promise,a.next=22,i.a.awrap(v.firestore.collection("PostCategories").doc(b.id).collection("Posts").where("bias","<",r+o).where("bias",">",r-g).get());case 22:return a.t7=a.sent.docs.map((function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=e.data(),console.log(e.img),n.t0=e.title,n.t1=e.content,n.t2=e.uid,e.img&&"null"!=e.img){n.next=9;break}n.t3=null,n.next=18;break;case 9:return n.next=11,i.a.awrap(v.storage.ref("images/"+e.img+".jpeg").getDownloadURL().catch((function(){return null})));case 11:if(n.t4=t=n.sent,null==n.t4){n.next=16;break}n.t5=t,n.next=17;break;case 16:n.t5=null;case 17:n.t3=n.t5;case 18:return n.t6=n.t3,n.t7=Math.round(e.bias),n.abrupt("return",{title:n.t0,content:n.t1,uid:n.t2,img:n.t6,bias:n.t7});case 21:case"end":return n.stop()}}),null,null,null,Promise)})),a.t8=a.t6.all.call(a.t6,a.t7),a.next=26,a.t5.awrap.call(a.t5,a.t8);case 26:a.t9=a.sent,(0,a.t4)(a.t9);case 28:case"end":return a.stop()}}),null,null,null,Promise)}()})),f.a.createElement(m.Layout,{level:"2",style:null==E?B.myChatsLoading:B.myChats},null==E?f.a.createElement(m.Spinner,null):f.a.createElement(m.List,{data:E,ItemSeparatorComponent:m.Divider,renderItem:function(e){var t=e.item;return console.log(t),f.a.createElement(m.Card,{style:{marginVertical:8},footer:J},f.a.createElement(m.Layout,{style:B.itemStyxContainer,level:"2"},f.a.createElement(m.Text,{style:B.itemStyxText,category:"h6"},t.title),f.a.createElement(m.Button,{style:B.itemStyxButton,size:"tiny"},"User bias score: "+t.bias)),t.img?f.a.createElement(d.a,{source:t.img,style:{width:"100%",height:500},resizeMode:"contain"}):f.a.createElement(f.a.Fragment,null),f.a.createElement(m.Text,{style:B.itemDescription,category:"s1"},t.content))}}),f.a.createElement(m.Button,{size:"large",accessoryLeft:function(e){return f.a.createElement(m.Icon,l()({},e,{name:"plus-outline"}))},style:B.newChat,onPress:function(){n.navigate("New Post",{c:b})}}))}var J=function(){return f.a.createElement(h.a,{style:B.itemFooter},f.a.createElement(h.a,{style:B.itemReactionsContainer}))},W=n(900);function K(e){var t=e.route,n=e.navigation,r=t.params.c,a=Object(s.useState)(""),o=c()(a,2),u=o[0],l=o[1],p=Object(s.useState)(null),y=c()(p,2),g=y[0],h=y[1],b=Object(s.useState)(null),x=c()(b,2),w=x[0],E=x[1],P=Object(s.useState)(""),S=c()(P,2),C=S[0],O=S[1],A=Object(s.useState)(!1),j=c()(A,2),D=j[0],R=j[1];return f.a.createElement(m.Layout,{level:"3",style:B.myChatsLoading},f.a.createElement(m.Card,{style:{width:"95%"}},f.a.createElement(m.Input,{label:"Title",value:u,onChangeText:l}),f.a.createElement(m.Input,{label:"Content",value:C,onChangeText:O,multiline:!0,numberOfLines:5}),f.a.createElement(m.Button,{onPress:function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return R(!0),n.next=3,i.a.awrap(N({mediaTypes:I.All,allowsEditing:!0,quality:1,base64:!0}));case 3:e=n.sent,console.log(e),e.cancelled?R(!1):(h(e.uri),t=W(),v.storage.ref().child("/images/"+t+".jpeg").putString(e.uri,"data_url").then((function(e){R(!1),E(t),console.log("upload complete",e)})));case 6:case"end":return n.stop()}}),null,null,null,Promise)}},"Attach Image"),null==g?f.a.createElement(f.a.Fragment,null):f.a.createElement(f.a.Fragment,null,f.a.createElement(d.a,{source:{uri:g},style:{width:200,height:200}})),f.a.createElement(m.Button,{disabled:D,onPress:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return R(!0),t.t0=fetch,t.t1=z.a+"/"+r.id+"/addPost",t.t2={Accept:"application/json","Content-Type":"application/json"},t.t3=JSON,t.t4=u,t.t5=C,t.next=9,i.a.awrap(null==(e=v.auth.currentUser)?void 0:e.getIdToken());case 9:t.t6=t.sent,t.t7=null!=w?w:"null",t.t8={title:t.t4,content:t.t5,token:t.t6,img:t.t7},t.t9=t.t3.stringify.call(t.t3,t.t8),t.t10={method:"POST",headers:t.t2,body:t.t9},(0,t.t0)(t.t1,t.t10),n.navigate("Category",{c:r});case 16:case"end":return t.stop()}}),null,null,null,Promise)}},"Post")))}function X(e){return{description:e.data().description,title:e.data().title,id:e.id}}function Y(e){var t=e.navigation,n=Object(s.useState)(null),r=c()(n,2),a=r[0],o=r[1];return Object(s.useEffect)((function(){null==a&&v.firestore.collection("PostCategories").get().then((function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Promise.all(e.docs.map(X)));case 2:t=n.sent,console.log(t),o(t);case 5:case"end":return n.stop()}}),null,null,null,Promise)}))})),f.a.createElement(m.Layout,{level:"2",style:null==a?B.myChatsLoading:B.myChats},null==a?f.a.createElement(m.Spinner,null):f.a.createElement(f.a.Fragment,null,f.a.createElement(m.Divider,null),f.a.createElement(m.List,{data:a,renderItem:function(e){var n=e.item;return f.a.createElement(m.ListItem,{title:n.title,description:n.description,onPress:function(){t.navigate("Category",{c:n})}})},ItemSeparatorComponent:m.Divider})))}},908:function(e,t,n){"use strict";var r,a=n(32),i="undefined"!==typeof window&&!(null==(r=window.document)||!r.createElement),o={OS:a.a.OS,select:a.a.select,isDOMAvailable:i};t.a=o},914:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(5),a=n.n(r),i=n(8),o=n.n(i),c=n(9),u=n.n(c),l=n(7),s=n.n(l),f=n(908);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s()(e);if(t){var a=s()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var p=function(e){o()(n,e);var t=m(n);function n(e,r){return a()(this,n),t.call(this,"ERR_UNAVAILABLE","The method or property "+e+"."+r+" is not available on "+f.a.OS+", are you sure you've linked all the native dependencies properly?")}return n}(n(901).a)}}]);
//# sourceMappingURL=5.af20ae2f.chunk.js.map